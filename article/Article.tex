%
% Complete documentation on the extended LaTeX markup used for Insight
% documentation is available in ``Documenting Insight'', which is part
% of the standard documentation for Insight.  It may be found online
% at:
%
%     http://www.itk.org/

\documentclass{InsightArticle}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%  hyperref should be the last package to be loaded.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[dvips,
bookmarks,
bookmarksopen,
backref,
colorlinks,linkcolor={blue},citecolor={blue},urlcolor={blue},
]{hyperref}
% to be able to use options in graphics
\usepackage{graphicx}
% for pseudo code
\usepackage{listings}
% subfigures
\usepackage{subfigure}


%  This is a template for Papers to the Insight Journal. 
%  It is comparable to a technical report format.

% The title should be descriptive enough for people to be able to find
% the relevant document. 
\title{Efficient grayscale morphology using moving histogram algorithm}

% Increment the release number whenever significant changes are made.
% The author and/or editor can define 'significant' however they like.
% \release{0.00}

% At minimum, give your name and an email address.  You can include a
% snail-mail address if you like.
\author{Ga\"etan Lehmann{$^2$} {\small{and}} Richard Beare{$^1$}}
\authoraddress{{$^1$}Unit\'e de Biologie du D\'eveloppement et de la Reproduction, Institut National de la Recherche Agronomique, 78350 Jouy-en-Josas, France.\\
{$^2$}Department of Medicine, Moansh University, Australia.}
\begin{document}
\maketitle

\ifhtml
\chapter*{Front Matter\label{front}}
\fi


\begin{abstract}
\noindent
Grayscale dilation and erosion are basic transformations of mathemaical
morphology. Used together or with other transformations, they are very useful
tool for image analysis. However, they can be very time consuming, especially
with 3D images, and with large structuring elements. Several algorithms have
been created to decrease the computation time. Most of the time, they are
limited to structuring elements with particular property of shape or size. The
moving histogram algorithm \cite{vandroogenbroeckTalbot96} implemented in this
contribution does not suffer this limitation and so is well suited for usage in
a generalist library like ITK. We also introduce a meta filter designed to
select the best algorithm depending on the image and the structuring element.
This meta filter is also a step toward a soft integration of more efficent
algorithm but limited to some shape of structuring elements like the Van
Herk/Gil-Werman algorithm \cite{vanHerk92,GilWerman93}.
\end{abstract}

% \tableofcontents


\section{Introduction}

  \subsection{Definition}

  \subsection{Examples}

  \subsection{Algorithms review}

\section{Algorithm}

\section{Implementation}

\section{Implementing other transformations with the {\em MovingHistogramImageFilter} class}

\section{Performance}

  \subsection{Impact of the size of the image}

To determine the impact of the size of the image on the performance of the two
algorithms, we have run the tests with different sizes of image, always with
the same structuring element: a disc of radius 5.

The test can be repeated with the command
\verb$./perf_image_size ../images/niece.jpg$.

\begin{figure}[htbp]
\centering
\includegraphics{perf_image_size}
\caption{Impact of image size on performance of the two algorithms.\label{perf_image_size}}
\end{figure}

A close look at Figure \ref{perf_image_size} show that none of the algorithm
have a linear execution time depending on the image size. This non-linearity can
be explained by the optimization of the algorithms in the center of the
image. The higher curvature observed for the basic algorithm show that the
optimization is more efficient for the basic algorithm. This result is
consistent with the analyze of the algorithms: the basic one does no test in the
center of the image while the moving histogram one keeps doing one test per
pixel to determine that further tests can be avoided.

  \subsection{Impact of the size of the structuring element}

Figure \ref{perf2D-total} show that the execution time is linear depending on
the full size of the structuring element (not the number of neighbours in it)
for the basic algorithm, while Figure \ref{perf2D-hnb} show that the execution
time of the moving histogram algorithm is linear depending on the number of
pixel added and removed per translation.

The moving histogram algorithm have a lower complexity for common cases, like
disc or square structuring element.

\begin{figure}[htbp]
\centering
\includegraphics{perf2D-total}
\caption{Impact of image size on performance of the two algorithms.\label{perf2D-total}}
\end{figure}

\begin{figure}[htbp]
\centering
\includegraphics{perf2D-hnb}
\caption{Impact of image size on performance of the two algorithms.\label{perf2D-hnb}}
\end{figure}

  \subsection{Impact of the number of neighbours in the structuring element}

  \subsection{Impact of shape of the structuring element}

  \subsection{Impact of the number of threads}

  \subsection{Impact of pixel type}

\section{Meta filter}

\section{Acknolegements}

\section{Conclusion}

% \url{http://www.itk.org}
% \code{Insight/Documentation/Style.pdf}
% \section{Principles of Solar Spot Detection}
% \cite{ITKSoftwareGuide}.
% \doxygen{ImageToImageFilter}

% \small \begin{verbatim}
% \end{verbatim} \normalsize


% The {itemize} environment uses a bullet for each \item.  If you want the 
% \item's numbered, use the {enumerate} environment instead.
% \begin{itemize}
%   \item  Insight Toolkit 2.4.
%   \item  CMake 2.2
% \end{itemize}

% \ref{cthead1}

% 

\appendix



\bibliographystyle{plain}
\bibliography{Article,InsightJournal}
\nocite{ITKSoftwareGuide}

\end{document}

